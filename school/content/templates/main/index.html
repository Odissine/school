{% extends 'layouts/default/base.html' %}
{% load i18n %}
{% load mathfilters %}
{% load float2integer %}
{% load auth_extras %}
{% block title %}School @ ENDTG - Accueil{% endblock %}
{% block content %}
{% if user.is_authenticated %}
<div class="mt-10 h1">Bienvenue {{ user.first_name }} !</div>
<div class="row">
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:letter' %}';">
        <div class="card mb-3 border-primary">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-type" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Jeux de Lettres</h5>
                        <p class="card-text">Pour mieux connaître son clavier... <br/>Plusieurs niveaux disponibles. A vous de jouer, vous avez 1 minute pour saisir un maximum de lettres.</p>
                        <div class="progress mt-3" data-bs-original-title="{{ score_letter }} / {{ max_score_letter }}" data-bs-toggle="tooltip" data-bs-placement="top">
                            <div class="progress-bar-striped {% if score_letter < max_score_letter|mul:20|div:100 %}bg-danger{% elif score_letter > max_score_letter|mul:80|div:100 %}bg-success{% else %}bg-warning{% endif %}" role="progressbar" style="width: {{ score_letter_purcent }}%" aria-valuenow="{{ score_letter}}" aria-valuemin="0" aria-valuemax="{{ max_score_letter }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:word_one' %}';">
        <div class="card mb-3 border-primary">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-code-slash" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Jeux de Mots</h5>
                        <p class="card-text">Pour encore mieux connaître son clavier...<br/>Plusieurs niveaux disponibles. A vous de jouer, vous avez 1 minute pour saisir un maximum de mots</p>
                        <div class="progress mt-3" data-bs-original-title="{{ score_word }} / {{ max_score_word }}" data-bs-toggle="tooltip" data-bs-placement="top">
                            <div class="progress-bar-striped {% if score_word < max_score_word|mul:20|div:100 %}bg-danger{% elif score_word > max_score_word|mul:80|div:100 %}bg-success{% else %}bg-warning{% endif %}" role="progressbar" style="width: {{ score_word_purcent }}%" aria-valuenow="{{ score_word }}" aria-valuemin="0" aria-valuemax="{{ max_score_word }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:addition' %}';">
        <div class="card mb-3 border-primary">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-plus-lg" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Additions</h5>
                        <p class="card-text">Entraînes-toi au calcul mental en réalisant un maximum d'additions simple en moins d'une minute !</p>
                        <div class="progress mt-3" data-bs-original-title="{{ score_addition }} / {{ max_score_addition}}" data-bs-toggle="tooltip" data-bs-placement="top">
                            <div class="progress-bar-striped {% if score_addition < max_score_addition|mul:20|div:100 %}bg-danger{% elif score_addition > max_score_addition|mul:80|div:100 %}bg-success{% else %}bg-warning{% endif %}" role="progressbar" style="width: {{ score_addition_purcent }}%" aria-valuenow="{{ score_addition }}" aria-valuemin="0" aria-valuemax="{{ max_score_addition }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:soustraction' %}';">
        <div class="card mb-3 border-primary">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-dash-lg" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Soustractions</h5>
                        <p class="card-text">Entraînes-toi au calcul mental en réalisant cette fois-ci un maximum de soustractions, sans pièges, en moins d'une minute !</p>
                        <div class="progress mt-3" data-bs-original-title="{{ score_soustraction }} / {{ max_score_soustraction }}" data-bs-toggle="tooltip" data-bs-placement="top">
                            <div class="progress-bar-striped {% if score_soustraction < max_score_soustraction|mul:20|div:100 %}bg-danger{% elif score_soustraction > max_score_soustraction|mul:80|div:100 %}bg-success{% else %}bg-warning{% endif %}" role="progressbar" style="width: {{ score_soustraction_purcent }}%" aria-valuenow="{{ score_soustraction }}" aria-valuemin="0" aria-valuemax="{{ max_score_soustraction }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:multiplication' %}';">
        <div class="card mb-3 border-primary">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-x-lg" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Multiplications</h5>
                        <p class="card-text">Entraînes-toi au calcul mental sur les tables de multiplications, toujours en moins d'une minute !</p>
                        <div class="progress mt-3" data-bs-original-title="{{ score_multiplication }} / {{ max_score_multiplication}}" data-bs-toggle="tooltip" data-bs-placement="top">
                            <div class="progress-bar-striped {% if score_multiplication < max_score_multiplication|mul:20|div:100 %}bg-danger{% elif score_multiplication > max_score_multiplication|mul:80|div:100 %}bg-success{% else %}bg-warning{% endif %}" role="progressbar" style="width: {{ score_multiplication_purcent }}%" aria-valuenow="{{ score_multiplication }}" aria-valuemin="0" aria-valuemax="{{ max_score_multiplication }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:addition_posee' %}';">
        <div class="card mb-3 border-primary">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-plus-slash-minus" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Additions posées</h5>
                        <p class="card-text">Entraînes-toi au calcul mental avec des additions posées sur des nombres compris entre 10 et 99.</p>
                        <div class="progress mt-3" data-bs-original-title="{{ score_additionposee }} / {{ max_score_additionposee}}" data-bs-toggle="tooltip" data-bs-placement="top">
                            <div class="progress-bar-striped {% if score_additionposee < max_score_additionposee|mul:20|div:100 %}bg-danger{% elif score_additionposee > max_score_additionposee|mul:80|div:100 %}bg-success{% else %}bg-warning{% endif %}" role="progressbar" style="width: {{ score_additionposee_purcent }}%" aria-valuenow="{{ score_additionposee }}" aria-valuemin="0" aria-valuemax="{{ max_score_additionposee }}"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% if request.user|has_group:"ADMIN" or request.user|has_group:"ENSEIGNANT" %}
<div class="row">
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:create_word_list' %}';">
        <div class="card mb-3 border-primary admin">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-body-text" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Ajouter de nouveaux mots</h5>
                        <p class="card-text">
                            Mots de niveau 1/4 : {{ nb_mots.level1 }} <br>
                            Mots de niveau 2/5 : {{ nb_mots.level2 }}<br>
                            Mots de niveau 3/6 : {{ nb_mots.level3 }}<br>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'account:user-list' 'la' %}';">
        <div class="card mb-3 border-primary admin">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-person-lines-fill" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Liste des utilisateurs</h5>
                        <p class="card-text">Affiche la liste des utilisateurs ainsi que les scores (lettres / mots) associés et permet de changer le mot de passe.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'account:export-users' %}';">
        <div class="card mb-3 border-primary admin">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-download" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Export des utilisateurs</h5>
                        <p class="card-text">Génère un fichier Json avec l'ensemble des utilisateurs de l'application.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-6" style="cursor:pointer;" onclick="location.href='{% url 'games:export-words' %}';">
        <div class="card mb-3 border-primary admin">
            <div class="row g-0">
                <div class="col-md-3 lh-5 text-center pt-4">
                    <i class="bi bi-download" style="font-size:6em;"></i>
                </div>
                <div class="col-md-9">
                    <div class="card-body">
                        <h5 class="card-title">Export des mots</h5>
                        <p class="card-text">Génère un fichier Json avec l'ensemble des mots et le level associé.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endif %}
{% else %}
<div class="my-2 h1">Bienvenue !</div>
<div class="text-center h4 mt-4">Afin de pouvoir profiter de l'ensemble des fonctionnalités du site, <a href="{% url 'account:login' %}">identifiez-vous</a>
    {% if is_prod is True %}
    ou <a href="{% url 'account:register' %}">créez un compte</a>{% endif %}
    !</div>
{% endif %}
<!--
{% if request.user|has_group:"CP" %}
    <p>CP</p>
{% endif  %}
{% if request.user|has_group:"CE1" %}
    <p>CE1</p>
{% endif  %}
{% if request.user|has_group:"CE2" %}
    <p>CE2</p>
{% endif  %}
{% if request.user|has_group:"CM1" %}
    <p>CM1</p>
{% endif  %}
{% if request.user|has_group:"CM2" %}
    <p>CM2</p>
{% endif  %}
{% if request.user|has_group:"ADMIN" %}
    <p>ADMIN</p>
{% endif  %}
{% if request.user|has_group:"ELEVE" %}
    <p>ELEVE</p>
{% endif  %}
{% if request.user|has_group:"ENSEIGNANT" %}
    <p>ENSEIGNANT</p>
{% endif  %}
-->
{% endblock %}